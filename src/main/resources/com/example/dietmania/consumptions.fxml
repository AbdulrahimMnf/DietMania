<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.shape.Rectangle?>

<StackPane xmlns="http://javafx.com/javafx"
           xmlns:fx="http://javafx.com/fxml"
           fx:controller="com.example.dietmania.Controllers.ConsumptionController"
           prefHeight="720" prefWidth="1080"
           style="-fx-background-color: #ffffff;">

   <!-- Top Bar -->
   <Rectangle height="70" width="1080"
              fill="#237d2f"
              StackPane.alignment="TOP_CENTER"/>

   <!-- Title at Top Left -->
   <Label text="My Consumptions"
          StackPane.alignment="TOP_LEFT"
          style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: white;">
      <StackPane.margin>
         <Insets top="22" left="40"/>
      </StackPane.margin>
   </Label>

   <!-- Main Content -->
   <VBox alignment="TOP_CENTER" spacing="30"
         StackPane.alignment="CENTER">
      <padding>
         <Insets top="100" left="40" right="40" bottom="40"/>
      </padding>

      <!-- Current Consumption Card -->
      <VBox spacing="20"
            style="-fx-background-color: white; -fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-border-radius: 8; -fx-padding: 25; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.05), 10, 0, 0, 2);">


         <HBox spacing="40" alignment="TOP_CENTER">
            <!-- Available Products Column -->
            <VBox spacing="15" prefWidth="350">
               <Label text="Available Products"
                      style="-fx-font-size: 14; -fx-font-weight: bold; -fx-text-fill: #666;"/>

               <ListView fx:id="productList" prefHeight="200.0"
                         style="-fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-border-radius: 4;"/>

               <Button onAction="#handleAddProduct" text="+"
                       style="-fx-background-color: #237d2f; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 25; -fx-background-radius: 4;"/>
            </VBox>

            <!-- Separator -->
            <Rectangle width="1" height="250" fill="#e0e0e0"/>

            <!-- Selected Products Column -->
            <VBox spacing="15" prefWidth="350">
               <Label text="Selected Products"
                      style="-fx-font-size: 14; -fx-font-weight: bold; -fx-text-fill: #666;"/>

               <ListView fx:id="selectedProductsList" prefHeight="200.0"
                         style="-fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-border-radius: 4;"/>

               <HBox spacing="15" alignment="CENTER_LEFT">
                  <Button onAction="#handleRemoveProduct" text="-"
                          style="-fx-background-color: #eb4034; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 15; -fx-background-radius: 4;"/>
               </HBox>

               <!-- Total Kcal Display -->
               <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-padding: 10 0;">
                  <Label fx:id="totalKcalLabel" text="0"
                         style="-fx-font-size: 18; -fx-font-weight: bold; -fx-text-fill: #008e9a;"/>
               </HBox>

               <Button fx:id="addConsumptionButton"
                       onAction="#handleAddConsumption"
                       text="Save Consumption"
                       style="-fx-background-color: #008e9a; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 10 30; -fx-background-radius: 4;"/>
            </VBox>
         </HBox>
      </VBox>

      <!-- Consumption History Card -->
      <VBox spacing="20"
            style="-fx-background-color: white; -fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-border-radius: 8; -fx-padding: 25; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.05), 10, 0, 0, 2);">


         <TableView fx:id="consumptionTable" prefHeight="300.0"
                    style="-fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-border-radius: 4;">
            <columns>
               <TableColumn fx:id="dateColumn" prefWidth="400.0" text="Date"
                            style="-fx-font-weight: bold; -fx-alignment: CENTER_LEFT;"/>
               <TableColumn fx:id="kcalColumn" prefWidth="200.0" text="Total Kcal"
                            style="-fx-font-weight: bold; -fx-alignment: CENTER_LEFT;"/>
            </columns>
         </TableView>

         <Button text="Back to Main"
                 onAction="#goBack"
                 style="-fx-background-color: transparent; -fx-text-fill: #237d2f; -fx-border-color: #237d2f; -fx-border-width: 1; -fx-border-radius: 3; -fx-padding: 5 15;"/>

      </VBox>



   </VBox>

   <!-- Logout Button Top Right -->
   <Button text="Logout"
           onAction="#handleLogout"
           StackPane.alignment="TOP_RIGHT"
           style="-fx-background-color: transparent; -fx-text-fill: white; -fx-border-color: white; -fx-border-width: 1; -fx-border-radius: 3; -fx-padding: 5 15;">
      <StackPane.margin>
         <Insets top="20" right="60"/>
      </StackPane.margin>
   </Button>

   <!-- Close Button -->
   <Button fx:id="closeBtn"
           StackPane.alignment="TOP_RIGHT"
           mnemonicParsing="false"
           onAction="#close"
           style="-fx-background-color: RED; -fx-text-fill: WHITE;"
           text="X">
      <StackPane.margin>
         <Insets top="22" right="30" />
      </StackPane.margin>
   </Button>

</StackPane>