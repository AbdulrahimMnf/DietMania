<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.shape.Rectangle?>

<StackPane xmlns="http://javafx.com/javafx"
           xmlns:fx="http://javafx.com/fxml"
           fx:controller="com.example.dietmania.Controllers.ProductController"
           prefHeight="720" prefWidth="1080"
           style="-fx-background-color: #ffffff;">

   <!-- Top Bar -->
   <Rectangle height="70" width="1080"
              fill="#4287f5"
              StackPane.alignment="TOP_CENTER"/>

   <!-- Title at Top Left -->
   <Label text="Product Management"
          StackPane.alignment="TOP_LEFT"
          style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: white;">
      <StackPane.margin>
         <Insets top="22" left="40"/>
      </StackPane.margin>
   </Label>

   <!-- Main Content -->
   <VBox alignment="TOP_CENTER" spacing="30"
         StackPane.alignment="CENTER">
      <padding>
         <Insets top="100" left="40" right="40" bottom="40"/>
      </padding>

      <!-- Product Management Card -->
      <VBox spacing="20"
            style="-fx-background-color: white; -fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-border-radius: 8; -fx-padding: 25; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.05), 10, 0, 0, 2);">

         <!-- Table Section -->
         <VBox spacing="15">

            <TableView fx:id="productTable" prefHeight="250.0"
                       style="-fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-border-radius: 4;">
               <columns>
                  <TableColumn fx:id="nameColumn" text="Name" prefWidth="150"/>
                  <TableColumn fx:id="descColumn" text="Description" prefWidth="200"/>
                  <TableColumn fx:id="kcalColumn" text="Kcal" prefWidth="80"/>
                  <TableColumn fx:id="proteinColumn" text="Protein" prefWidth="80"/>
                  <TableColumn fx:id="carbColumn" text="Carbs" prefWidth="80"/>
                  <TableColumn fx:id="fatColumn" text="Fat" prefWidth="80"/>
                  <TableColumn fx:id="categoryColumn" text="Category" prefWidth="120"/>
               </columns>
            </TableView>
         </VBox>

         <!-- Separator -->
         <Rectangle width="100" height="1" fill="#e0e0e0"/>

         <!-- Form Section -->
         <VBox spacing="15">
            <Label text="Manage Product"
                   style="-fx-font-size: 16; -fx-font-weight: bold; -fx-text-fill: #333;"/>

            <!-- Form Grid -->
            <HBox spacing="20" alignment="TOP_CENTER">
               <!-- Left Column -->
               <VBox spacing="15" prefWidth="350">
                  <HBox spacing="10" alignment="CENTER_LEFT">
                     <Label text="Name:"
                            style="-fx-text-fill: #666; -fx-min-width: 120; -fx-font-size: 14;"/>
                     <TextField fx:id="nameField"
                                promptText="Product Name"
                                style="-fx-pref-width: 200; -fx-padding: 8; -fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-border-radius: 4;"/>
                  </HBox>

                  <HBox spacing="10" alignment="CENTER_LEFT">
                     <Label text="Description:"
                            style="-fx-text-fill: #666; -fx-min-width: 120; -fx-font-size: 14;"/>
                     <TextField fx:id="descriptionField"
                                promptText="Description"
                                style="-fx-pref-width: 200; -fx-padding: 8; -fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-border-radius: 4;"/>
                  </HBox>

                  <HBox spacing="10" alignment="CENTER_LEFT">
                     <Label text="Category:"
                            style="-fx-text-fill: #666; -fx-min-width: 120; -fx-font-size: 14;"/>
                     <ComboBox fx:id="categoryCombo"
                               promptText="Select Category"
                               style="-fx-pref-width: 200; -fx-padding: 8;"/>
                  </HBox>
               </VBox>

               <!-- Right Column -->
               <VBox spacing="15" prefWidth="350">
                  <HBox spacing="10" alignment="CENTER_LEFT">
                     <Label text="Kcal:"
                            style="-fx-text-fill: #666; -fx-min-width: 100; -fx-font-size: 14;"/>
                     <TextField fx:id="kcalField"
                                promptText="Kcal"
                                style="-fx-pref-width: 120; -fx-padding: 8; -fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-border-radius: 4;"/>
                  </HBox>

                  <HBox spacing="10" alignment="CENTER_LEFT">
                     <Label text="Protein:"
                            style="-fx-text-fill: #666; -fx-min-width: 100; -fx-font-size: 14;"/>
                     <TextField fx:id="proteinField"
                                promptText="Protein"
                                style="-fx-pref-width: 120; -fx-padding: 8; -fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-border-radius: 4;"/>
                  </HBox>

                  <HBox spacing="10" alignment="CENTER_LEFT">
                     <Label text="Carbs:"
                            style="-fx-text-fill: #666; -fx-min-width: 100; -fx-font-size: 14;"/>
                     <TextField fx:id="carbField"
                                promptText="Carbohydrate"
                                style="-fx-pref-width: 120; -fx-padding: 8; -fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-border-radius: 4;"/>
                  </HBox>

                  <HBox spacing="10" alignment="CENTER_LEFT">
                     <Label text="Fat:"
                            style="-fx-text-fill: #666; -fx-min-width: 100; -fx-font-size: 14;"/>
                     <TextField fx:id="fatField"
                                promptText="Fat"
                                style="-fx-pref-width: 120; -fx-padding: 8; -fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-border-radius: 4;"/>
                  </HBox>
               </VBox>
            </HBox>

            <!-- Action Buttons -->
            <HBox spacing="15" alignment="CENTER" style="-fx-padding: 20 0 0 0;">
               <Button text="Add"
                       onAction="#handleAdd"
                       style="-fx-background-color: #237d2f; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 30; -fx-background-radius: 4;"/>

               <Button text="Update"
                       onAction="#handleUpdate"
                       style="-fx-background-color: #008e9a; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 30; -fx-background-radius: 4;"/>

               <Button text="Delete"
                       onAction="#handleDelete"
                       style="-fx-background-color: #eb4034; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 30; -fx-background-radius: 4;"/>
            </HBox>
         </VBox>
      </VBox>

      <!-- Back Button Card -->
      <HBox alignment="CENTER"
            style="-fx-background-color: white; -fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-border-radius: 8; -fx-padding: 15; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.05), 10, 0, 0, 2);">

         <Button text="Back to Main"
                 onAction="#goBack"
                 style="-fx-background-color: transparent; -fx-text-fill: #4287f5; -fx-border-color: #4287f5; -fx-border-width: 1; -fx-border-radius: 3; -fx-padding: 5 15;"/>
      </HBox>

   </VBox>

   <!-- Logout Button Top Right -->
   <Button text="Logout"
           onAction="#handleLogout"
           StackPane.alignment="TOP_RIGHT"
           style="-fx-background-color: transparent; -fx-text-fill: white; -fx-border-color: white; -fx-border-width: 1; -fx-border-radius: 3; -fx-padding: 5 15;">
      <StackPane.margin>
         <Insets top="20" right="60"/>
      </StackPane.margin>
   </Button>

   <!-- Close Button -->
   <Button fx:id="closeBtn"
           StackPane.alignment="TOP_RIGHT"
           mnemonicParsing="false"
           onAction="#close"
           style="-fx-background-color: RED; -fx-text-fill: WHITE;"
           text="X">
      <StackPane.margin>
         <Insets top="22" right="30" />
      </StackPane.margin>
   </Button>

</StackPane>